###############################################################################################################################################################################################################################
# Operating System #
####################
FROM debian:12

###############################################################################################################################################################################################################################
# Root #
########
RUN echo root:admin | chpasswd

###############################################################################################################################################################################################################################
# Mise a jour du conteneur #
############################
RUN apt update
RUN apt upgrade -y

###############################################################################################################################################################################################################################
# SystemD #
###########
RUN apt install -y systemd systemd-sysv && mkdir -p /etc/systemd/system.conf.d
RUN echo "[Install] \n systemctl daemon-reexec"  > /etc/systemd/system.conf.d/override.conf 


###############################################################################################################################################################################################################################
# Outil #
#########
#apt install -y bash;
#apt install -y bash-completion;
#apt install -y nano;
#apt install -y net-tools;

###############################################################################################################################################################################################################################
# SSH #
#######
#apt install -y openssh-server;
#sed -i -e "s/^#PermitRootLogin prohibit-password/PermitRootLogin yes/g" /etc/ssh/sshd_config 2>/dev/null;

###############################################################################################################################################################################################################################
# VNC #
#######
#apt install -y novnc;
#apt install -y python3-websockify;
#apt install -y tigervnc-standalone-server;
#(echo "admin123"; echo "admin123"; echo "n") | vncpasswd

###############################################################################################################################################################################################################################
# OpenSSL #
###########
#mdkir -p /usr/share/novnc/;
#(echo "FR"; echo "France"; echo "Paris"; echo "Personnel"; echo "Personnel"; echo "$(hostname)"; echo "mail@exemple.co"; ) | \
#openssl req -x509 -nodes -newkey rsa:3072 -keyout /usr/share/novnc/novnc.pem -out /usr/share/novnc/novnc.pem -days 3650

###############################################################################################################################################################################################################################
# Environnement User #
######################
#apt install --no-install-recommends -y mate;



###############################################################################################################################################################################################################################
# Expose #
##########
EXPOSE 22 80 443 5900 8080

###############################################################################################################################################################################################################################
# WorkDir #
###########
WORKDIR /root

###############################################################################################################################################################################################################################
# Set the default command to run systemd
CMD ["systemd"]
